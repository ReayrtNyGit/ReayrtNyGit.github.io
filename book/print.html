<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Modern Data Analysis</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="author.html"><strong aria-hidden="true">1.</strong> Author</a></li><li class="chapter-item expanded "><a href="version.html"><strong aria-hidden="true">2.</strong> Source control</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="SnapVsPatches.html"><strong aria-hidden="true">2.1.</strong> Snapshots (or versions) vs Changes (or patches)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="git.html"><strong aria-hidden="true">2.1.1.</strong> Snapshots</a></li><li class="chapter-item expanded "><a href="pijul.html"><strong aria-hidden="true">2.1.2.</strong> Patch based</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="document.html"><strong aria-hidden="true">3.</strong> Document format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="wordprocessor.html"><strong aria-hidden="true">3.1.</strong> Word processor</a></li><li class="chapter-item expanded "><a href="text.html"><strong aria-hidden="true">3.2.</strong> Text base</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="markdown.html"><strong aria-hidden="true">3.2.1.</strong> Markdown</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="IDE.html"><strong aria-hidden="true">4.</strong> Interactive Development Environment</a></li><li class="chapter-item expanded "><a href="charts.html"><strong aria-hidden="true">5.</strong> Charts and plotting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chartjs.html"><strong aria-hidden="true">5.1.</strong> Charts using Chart.js</a></li><li class="chapter-item expanded "><a href="charts/capture.html"><strong aria-hidden="true">5.2.</strong> Chart using Python chartjs</a></li></ol></li><li class="chapter-item expanded "><a href="nested/index.html"><strong aria-hidden="true">6.</strong> Nested example</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="nested/sub-chapter.html"><strong aria-hidden="true">6.1.</strong> Sub-chapter</a></li></ol></li><li class="chapter-item expanded "><a href="polars.html"><strong aria-hidden="true">7.</strong> Polars</a></li><li class="chapter-item expanded "><a href="Diagrams.html"><strong aria-hidden="true">8.</strong> Diagrams</a></li><li class="chapter-item expanded affix "><a href="polars_examples.html">Worked example</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Modern Data Analysis</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<h2 id="purpose"><a class="header" href="#purpose">Purpose</a></h2>
<p>This book aims to provide a brief overview of the how data analysis can be performed using modern tools that have only recently become available. These tools will  primarily be free and open source software developed to help the community by numerous contributors. There will also be a focus on producing Web based publications to facilitate dissemination of report contents.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="about-the-author"><a class="header" href="#about-the-author">About the Author</a></h1>
<h2 id="dr-john-halsall-phd"><a class="header" href="#dr-john-halsall-phd">Dr John Halsall PhD</a></h2>
<p>Following on from his PhD from Bangor University, and a successful academic career culminating in a postdoctoral appointment at the University College London developing ozone sensors, John then turned his talents to systems integration coding and management information for research assessment, student support, finance and business interaction within the university sector. </p>
<p>Since working as an independent consultant, John is now engaged in leveraging his skills in the commercial sector and now looks after an ever-growing portfolio of business activities.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="version-control"><a class="header" href="#version-control">Version control</a></h1>
<p>The use of git a snapshots based system has allowed an increase in both collaborative working and source control.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="snapshots-or-versions-vs-changes-or-patches"><a class="header" href="#snapshots-or-versions-vs-changes-or-patches">Snapshots (or versions) vs Changes (or patches)</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git"><a class="header" href="#git">Git</a></h1>
<p>Snapshots (or versions)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pijul"><a class="header" href="#pijul">Pijul</a></h1>
<p>Pijul is a Rust based version control system based on the theory of patches.</p>
<p><a href="https://pijul.org/manual/introduction.html">An introduction to Pijul</a></p>
<iframe id="reddit-embed" src="https://www.redditmedia.com/r/rust/comments/s7v0hp/announcing_pijul_10_beta_a_version_control_system/?ref_source=embed&amp;ref=share&amp;embed=true&amp;theme=dark" sandbox="allow-scripts allow-same-origin allow-popups" style="border: none;" height="126" 
width="640" scrolling="no"></iframe>
<p><a href="https://news.ycombinator.com/item?id=29991417">Hackernews coverage</a></p>
<iframe id="reddit-embed" src="https://www.redditmedia.com/r/rust/comments/lms0ay/pijul_the_mathematically_sound_version_control/?ref_source=embed&amp;ref=share&amp;embed=true&amp;theme=dark" sandbox="allow-scripts allow-same-origin allow-popups" style="border: none;" height="144" width="640" scrolling="no"></iframe>
<div style="break-before: page; page-break-before: always;"></div><h1 id="document-format"><a class="header" href="#document-format">Document format</a></h1>
<p>How to record and share the results of Analysis.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="word-processors"><a class="header" href="#word-processors">Word processors</a></h1>
<p>Perhaps the bane of any analysts life; word processors merge content and format in an unmergeable blob.</p>
<div style="break-before: page; page-break-before: always;"></div><p>Plain text is simple but visually basic.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="markdown"><a class="header" href="#markdown">Markdown</a></h1>
<p>A simple way to format plain text files to allow human readability and version control while being able to render to html.</p>
<p><a href="https://www.markdownguide.org/">Markdown</a></p>
<pre><code class="language-markdown">## Backticks
Three at the start of a code block
Comments within Markdown
`[comment]: # (This actually is the most platform independent comment)`
Three at the end of a code block
</code></pre>
<h2 id="python-code-block"><a class="header" href="#python-code-block">Python code block</a></h2>
<pre><code class="language-python">my_list = [1, 2, 3, 4, 5]
for i in my_list:
    print(i)
</code></pre>
<h2 id="subscript"><a class="header" href="#subscript">Subscript</a></h2>
<p>Use the sub html tag</p>
<p>Text<sub>Subscript</sub></p>
<h2 id="superscript"><a class="header" href="#superscript">Superscript</a></h2>
<p>Use the sup html tag</p>
<p>Text<sup>Superscript</sup></p>
<div style="break-before: page; page-break-before: always;"></div><!-- toc -->
<h1 id="interactive-development-environment"><a class="header" href="#interactive-development-environment">Interactive Development Environment</a></h1>
<h2 id="how-to-see-whats-going-on"><a class="header" href="#how-to-see-whats-going-on">How to see what's going on</a></h2>
<p>To view and quickly process data the goto tool still remains Microsoft Excel. Also, PowerBI has become widely used to produce web hosted data dashboards. However, PowerBI's user interface is vastly different from Excel and so can be unintuitive to users that only have experience of using Excel.</p>
<h2 id="python"><a class="header" href="#python">Python</a></h2>
<p>Python has become the de facto language for data Analysis due to its readability and wide range of analysis modules available, its built in Interactive Development Environment (IDE) IDLE is fairly basic, so it is usually used with an addition IDE such as the following;</p>
<h3 id="jupyter-notebooks"><a class="header" href="#jupyter-notebooks">Jupyter Notebooks</a></h3>
<p><a href="https://jupyter.org/">Jupyter Notebooks</a> are now widely used in Science and Data Analysis as they are able to accommodate a range of languages and are an excellent tool for data exploration and visualisation.</p>
<h4 id="cons"><a class="header" href="#cons">Cons</a></h4>
<ol>
<li>No good version control process</li>
<li>Not suitable for fully automated processes</li>
</ol>
<h3 id="vscode"><a class="header" href="#vscode">VScode</a></h3>
<p>An excellent editor for multiple languages with many plugin tools available.</p>
<h4 id="cons-1"><a class="header" href="#cons-1">Cons</a></h4>
<ol>
<li>Not so good as displaying output</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="charts-and-plotting"><a class="header" href="#charts-and-plotting">Charts and plotting</a></h1>
<h2 id="python-1"><a class="header" href="#python-1">Python</a></h2>
<p>Python has a great many charting and plotting options. However, while embedded SVG files are useful for static reports their presentation in a web based report can appear rather dated. Hence the necessity to look at Javascript to chart summary data.</p>
<h3 id="altair"><a class="header" href="#altair">Altair</a></h3>
<h3 id="plotly"><a class="header" href="#plotly">Plot.ly</a></h3>
<p>Plotly appears to be well regarded within the Python community as a simple but powerful tool to provide quick and aesthetically pleasing charts.<sup class="footnote-reference"><a href="#1">1</a></sup></p>
<p>Plotly Python Library](https://plotly.com/python/)</p>
<h3 id="holoviews"><a class="header" href="#holoviews">HoloViews</a></h3>
<p><a href="https://holoviews.org/">HoloViews</a></p>
<h3 id="mpld3"><a class="header" href="#mpld3">mpld3</a></h3>
<p><a href="charts/mpld3.html">example</a></p>
<h2 id="including-charts-in-markdown-documents"><a class="header" href="#including-charts-in-markdown-documents">Including charts in markdown documents</a></h2>
<p><a href="https://towardsdatascience.com/how-to-insert-a-python-graph-into-an-html-web-site-688754f67e1c">Python Charts in html</a></p>
<p><a href="https://stackoverflow.com/questions/40335929/including-html-in-markdown">Including html in Markdown document</a></p>
<aside>
<h2 id="my-heading-as-an-example-to-be-included"><a class="header" href="#my-heading-as-an-example-to-be-included">My heading as an example to be included</a></h2>
<p>Some text, some text, some more text.</p>
</aside>
<h3 id="example-of-png-file-import"><a class="header" href="#example-of-png-file-import">Example of png file import</a></h3>
<p><img src="visualization.png" alt="Example chart in png format" /></p>
<h3 id="example-of-svg-file-import"><a class="header" href="#example-of-svg-file-import">Example of svg file import</a></h3>
<p><img src="visualization.svg" alt="Example chart in png format" /></p>
<h3 id="examples-of-echartshtml-embedded-file"><a class="header" href="#examples-of-echartshtml-embedded-file">Examples of eCharts.html embedded file</a></h3>
<p><a href="charts/line-simple.html">Bar chart</a></p>
<p><a href="charts/area-stack.html">Stacked area chart</a></p>
<h3 id="embedded-script-from-echartsjs"><a class="header" href="#embedded-script-from-echartsjs">Embedded script from echarts.js</a></h3>
<p><a href="echarts_demo.html">eCharts embedded html</a></p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Reddit</p>
</div>
<iframe id="reddit-embed" src="https://www.redditmedia.com/r/datascience/comments/sviwma/whats_your_favorite_data_visualization_tool_for/?ref_source=embed&amp;ref=share&amp;embed=true&amp;theme=dark" sandbox="allow-scripts allow-same-origin allow-popups" style="border: none;" height="186" width="640" scrolling="no"></iframe>
<div style="break-before: page; page-break-before: always;"></div><h1 id="charts-using-chartjs"><a class="header" href="#charts-using-chartjs">Charts using Chart.js</a></h1>
<p><canvas id="myChart" width="400" height="400"></canvas></p>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const labels = [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
  ];

  const data = {
    labels: labels,
    datasets: [{
      label: 'My First dataset',
      backgroundColor: 'rgb(255, 99, 132)',
      borderColor: 'rgb(255, 99, 132)',
      data: [0, 10, 5, 2, 20, 30, 45],
    }]
  };

  const config = {
    type: 'line',
    data: data,
    options: {}
  };
</script>
<script>
  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
</script><div style="break-before: page; page-break-before: always;"></div><p>&lt;!doctype html&gt;</p>
<html>
	<head>
		<title>My test chart</title>
		<script>
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){"use strict";var t=this,i=t.Chart,e=function(t){this.canvas=t.canvas,this.ctx=t;var i=function(t,i){return t["offset"+i]?t["offset"+i]:document.defaultView.getComputedStyle(t).getPropertyValue(i)},e=this.width=i(t.canvas,"Width"),n=this.height=i(t.canvas,"Height");t.canvas.width=e,t.canvas.height=n;var e=this.width=t.canvas.width,n=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,s.retinaScale(this),this};e.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},e.types={};var s=e.helpers={},n=s.each=function(t,i,e){var s=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var n;for(n=0;n<t.length;n++)i.apply(e,[t[n],n].concat(s))}else for(var o in t)i.apply(e,[t[o],o].concat(s))},o=s.clone=function(t){var i={};return n(t,function(e,s){t.hasOwnProperty(s)&&(i[s]=e)}),i},a=s.extend=function(t){return n(Array.prototype.slice.call(arguments,1),function(i){n(i,function(e,s){i.hasOwnProperty(s)&&(t[s]=e)})}),t},h=s.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=s.indexOf=function(t,i){if(Array.prototype.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1},r=(s.where=function(t,i){var e=[];return s.each(t,function(t){i(t)&&e.push(t)}),e},s.findNextWhere=function(t,i,e){e||(e=-1);for(var s=e+1;s<t.length;s++){var n=t[s];if(i(n))return n}},s.findPreviousWhere=function(t,i,e){e||(e=t.length);for(var s=e-1;s>=0;s--){var n=t[s];if(i(n))return n}},s.inherits=function(t){var i=this,e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},s=function(){this.constructor=e};return s.prototype=i.prototype,e.prototype=new s,e.extend=r,t&&a(e.prototype,t),e.__super__=i.prototype,e}),c=s.noop=function(){},u=s.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=s.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=s.amd="function"==typeof define&&define.amd,f=s.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=s.max=function(t){return Math.max.apply(Math,t)},m=s.min=function(t){return Math.min.apply(Math,t)},v=(s.cap=function(t,i,e){if(f(i)){if(t>i)return i}else if(f(e)&&e>t)return e;return t},s.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),S=s.radians=function(t){return t*(Math.PI/180)},x=(s.getAngleFromPoint=function(t,i){var e=i.x-t.x,s=i.y-t.y,n=Math.sqrt(e*e+s*s),o=2*Math.PI+Math.atan2(s,e);return 0>e&&0>s&&(o+=2*Math.PI),{angle:o,distance:n}},s.aliasPixel=function(t){return t%2===0?0:.5}),y=(s.splineCurve=function(t,i,e,s){var n=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),o=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),a=s*n/(n+o),h=s*o/(n+o);return{inner:{x:i.x-a*(e.x-t.x),y:i.y-a*(e.y-t.y)},outer:{x:i.x+h*(e.x-t.x),y:i.y+h*(e.y-t.y)}}},s.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),C=(s.calculateScaleRange=function(t,i,e,s,n){var o=2,a=Math.floor(i/(1.5*e)),h=o>=a,l=g(t),r=m(t);l===r&&(l+=.5,r>=.5&&!s?r-=.5:l+=.5);for(var c=Math.abs(l-r),u=y(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=s?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),S=Math.round(f/v);(S>a||a>2*S)&&!h;)if(S>a)v*=2,S=Math.round(f/v),S%1!==0&&(h=!0);else if(n&&u>=0){if(v/2%1!==0)break;v/=2,S=Math.round(f/v)}else v/=2,S=Math.round(f/v);return h&&(S=o,v=f/S),{steps:S,stepValue:v,min:p,max:p+S*v}},s.template=function(t,i){function e(t,i){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t];return i?e(i):e}if(t instanceof Function)return t(i);var s={};return e(t,i)}),w=(s.generateLabels=function(t,i,e,s){var o=new Array(i);return labelTemplateString&&n(o,function(i,n){o[n]=C(t,{value:e+s*(n+1)})}),o},s.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)))},easeOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin(2*(1*t-i)*Math.PI/e)+1)},easeInOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:2==(t/=.5)?1:(e||(e=.3*1.5),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e):s*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)*.5+1)},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),b=s.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),P=s.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),L=(s.animationLoop=function(t,i,e,s,n,o){var a=0,h=w[e]||w.linear,l=function(){a++;var e=a/i,r=h(e);t.call(o,r,e,a),s.call(o,r,e),i>a?o.animationFrame=b(l):n.apply(o)};b(l)},s.getRelativePosition=function(t){var i,e,s=t.originalEvent||t,n=t.currentTarget||t.srcElement,o=n.getBoundingClientRect();return s.touches?(i=s.touches[0].clientX-o.left,e=s.touches[0].clientY-o.top):(i=s.clientX-o.left,e=s.clientY-o.top),{x:i,y:e}},s.addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}),k=s.removeEvent=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=c},F=(s.bindEvents=function(t,i,e){t.events||(t.events={}),n(i,function(i){t.events[i]=function(){e.apply(t,arguments)},L(t.chart.canvas,i,t.events[i])})},s.unbindEvents=function(t,i){n(i,function(i,e){k(t.chart.canvas,e,i)})}),R=s.getMaximumWidth=function(t){var i=t.parentNode;return i.clientWidth},T=s.getMaximumHeight=function(t){var i=t.parentNode;return i.clientHeight},A=(s.getMaximumSize=s.getMaximumWidth,s.retinaScale=function(t){var i=t.ctx,e=t.canvas.width,s=t.canvas.height;window.devicePixelRatio&&(i.canvas.style.width=e+"px",i.canvas.style.height=s+"px",i.canvas.height=s*window.devicePixelRatio,i.canvas.width=e*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio))}),M=s.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},W=s.fontString=function(t,i,e){return i+" "+t+"px "+e},z=s.longestText=function(t,i,e){t.font=i;var s=0;return n(e,function(i){var e=t.measureText(i).width;s=e>s?e:s}),s},B=s.drawRoundedRectangle=function(t,i,e,s,n,o){t.beginPath(),t.moveTo(i+o,e),t.lineTo(i+s-o,e),t.quadraticCurveTo(i+s,e,i+s,e+o),t.lineTo(i+s,e+n-o),t.quadraticCurveTo(i+s,e+n,i+s-o,e+n),t.lineTo(i+o,e+n),t.quadraticCurveTo(i,e+n,i,e+n-o),t.lineTo(i,e+o),t.quadraticCurveTo(i,e,i+o,e),t.closePath()};e.instances={},e.Type=function(t,i,s){this.options=i,this.chart=s,this.id=u(),e.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,t)},a(e.Type.prototype,{initialize:function(){return this},clear:function(){return M(this.chart),this},stop:function(){return P(this.animationFrame),this},resize:function(t){this.stop();var i=this.chart.canvas,e=R(this.chart.canvas),s=this.options.maintainAspectRatio?e/this.chart.aspectRatio:T(this.chart.canvas);return i.width=this.chart.width=e,i.height=this.chart.height=s,A(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?s.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return C(this.options.legendTemplate,this)},destroy:function(){this.clear(),F(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete e.instances[this.id]},showTooltip:function(t,i){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var i=!1;return t.length!==this.activeElements.length?i=!0:(n(t,function(t,e){t!==this.activeElements[e]&&(i=!0)},this),i)}.call(this,t);if(o||i){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,h,r=this.datasets.length-1;r>=0&&(a=this.datasets[r].points||this.datasets[r].bars||this.datasets[r].segments,h=l(a,t[0]),-1===h);r--);var c=[],u=[],d=function(){var t,i,e,n,o,a=[],l=[],r=[];return s.each(this.datasets,function(i){t=i.points||i.bars||i.segments,t[h]&&t[h].hasValue()&&a.push(t[h])}),s.each(a,function(t){l.push(t.x),r.push(t.y),c.push(s.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=m(r),e=g(r),n=m(l),i=g(l),{x:n>this.chart.width/2?n:i,y:(o+e)/2}}.call(this,h);new e.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else n(t,function(t){var i=t.tooltipPosition();new e.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),e.Type.extend=function(t){var i=this,s=function(){return i.apply(this,arguments)};if(s.prototype=o(i.prototype),a(s.prototype,t),s.extend=e.Type.extend,t.name||i.prototype.name){var n=t.name||i.prototype.name,l=e.defaults[i.prototype.name]?o(e.defaults[i.prototype.name]):{};e.defaults[n]=a(l,t.defaults),e.types[n]=s,e.prototype[n]=function(t,i){var o=h(e.defaults.global,e.defaults[n],i||{});return new s(t,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return i},e.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(e.Element.prototype,{initialize:function(){},restore:function(t){return t?n(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return n(t,function(t,i){this._saved[i]=this[i],this[i]=t},this),this},transition:function(t,i){return n(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),e.Element.extend=r,e.Point=e.Element.extend({display:!0,inRange:function(t,i){var e=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(i-this.y,2)<Math.pow(e,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),e.Arc=e.Element.extend({inRange:function(t,i){var e=s.getAngleFromPoint(this,{x:t,y:i}),n=e.angle>=this.startAngle&&e.angle<=this.endAngle,o=e.distance>=this.innerRadius&&e.distance<=this.outerRadius;return n&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,i=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*i,y:this.y+Math.sin(t)*i}},draw:function(t){var i=this.ctx;i.beginPath(),i.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),i.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),i.closePath(),i.strokeStyle=this.strokeColor,i.lineWidth=this.strokeWidth,i.fillStyle=this.fillColor,i.fill(),i.lineJoin="bevel",this.showStroke&&i.stroke()}}),e.Rectangle=e.Element.extend({draw:function(){var t=this.ctx,i=this.width/2,e=this.x-i,s=this.x+i,n=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(e+=o,s-=o,n+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(e,this.base),t.lineTo(e,n),t.lineTo(s,n),t.lineTo(s,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,i){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&i>=this.y&&i<=this.base}}),e.Tooltip=e.Element.extend({draw:function(){var t=this.chart.ctx;t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var i=this.caretPadding=2,e=t.measureText(this.text).width+2*this.xPadding,s=this.fontSize+2*this.yPadding,n=s+this.caretHeight+i;this.x+e/2>this.chart.width?this.xAlign="left":this.x-e/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-e/2,a=this.y-n;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-i),t.lineTo(this.x+this.caretHeight,this.y-(i+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(i+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+i+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+i),t.lineTo(this.x+this.caretHeight,this.y+i+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+i+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-e+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}B(t,o,a,e,s,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+e/2,a+s/2)}}}),e.MultiTooltip=e.Element.extend({initialize:function(){this.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=W(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=z(this.ctx,this.font,this.labels)+this.fontSize+3,e=g([i,t]);this.width=e+2*this.xPadding;var s=this.height/2;this.y-s<0?this.y=s:this.y+s>this.chart.height&&(this.y=this.chart.height-s),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var i=this.y-this.height/2+this.yPadding,e=t-1;return 0===t?i+this.titleFontSize/2:i+(1.5*this.fontSize*e+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{B(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,s.each(this.labels,function(i,e){t.fillStyle=this.textColor,t.fillText(i,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[e].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),e.Scale=e.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?z(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,i,e=this.ctx.measureText(this.xLabels[0]).width,s=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=s/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,o=z(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)n=Math.cos(S(this.xLabelRotation)),t=n*e,i=n*s,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(S(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var i=this.drawingArea()/(this.min-this.max);return this.endPoint-i*(t-this.min)},calculateX:function(t){var i=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),s=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=e/2),Math.round(s)},update:function(t){s.extend(this,t),this.fit()},draw:function(){var t=this.ctx,i=(this.endPoint-this.startPoint)/this.steps,e=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,n(this.yLabels,function(n,o){var a=this.endPoint-i*o,h=Math.round(a),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(n,e-10,a),0!==o||l||(l=!0),l&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),h+=s.aliasPixel(t.lineWidth),l&&(t.moveTo(e,h),t.lineTo(this.width,h),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(e-5,h),t.lineTo(e,h),t.stroke(),t.closePath()},this),n(this.xLabels,function(i,e){var s=this.calculateX(e)+x(this.lineWidth),n=this.calculateX(e-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==e||a||(a=!0),a&&t.beginPath(),e>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a&&(t.moveTo(n,this.endPoint),t.lineTo(n,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n,this.endPoint),t.lineTo(n,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*S(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(i,0,0),t.restore()},this))}}),e.RadialScale=e.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var i=this.drawingArea/(this.max-this.min);return(t-this.min)*i},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,i,e,s,n,o,a,h,l,r,c,u,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)t=this.getPointPosition(i,d),e=this.ctx.measureText(C(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(s=e/2,t.x+s>p&&(p=t.x+s,n=i),t.x-s<g&&(g=t.x-s,a=i)):i<this.valuesCount/2?t.x+e>p&&(p=t.x+e,n=i):i>this.valuesCount/2&&t.x-e<g&&(g=t.x-e,a=i);l=g,r=Math.ceil(p-this.width),o=this.getIndexAngle(n),h=this.getIndexAngle(a),c=r/Math.sin(o+Math.PI/2),u=l/Math.sin(h+Math.PI/2),c=f(c)?c:0,u=f(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,i){var e=this.width-i-this.drawingArea,s=t+this.drawingArea;this.xCenter=(s+e)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var i=2*Math.PI/this.valuesCount;return t*i-Math.PI/2},getPointPosition:function(t,i){var e=this.getIndexAngle(t);return{x:Math.cos(e)*i+this.xCenter,y:Math.sin(e)*i+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(n(this.yLabels,function(i,e){if(e>0){var s,n=e*(this.drawingArea/this.steps),o=this.yCenter-n;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)s=this.getPointPosition(a,this.calculateCenterOffset(this.min+e*this.stepValue)),0===a?t.moveTo(s.x,s.y):t.lineTo(s.x,s.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=t.measureText(i).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-h/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(i,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var e=this.getPointPosition(i,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(e.x,e.y),t.stroke(),t.closePath()}var s=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);t.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,h=a/2,l=h>i||i>o-h,r=i===h||i===o-h;t.textAlign=0===i?"center":i===a?"center":a>i?"left":"right",t.textBaseline=r?"middle":l?"bottom":"top",t.fillText(this.labels[i],s.x,s.y)}}}}}),s.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n(e.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e),t.Chart=e,e.noConflict=function(){return t.Chart=i,e}}).call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Bar",defaults:s,initialize:function(t){var s=this.options;this.ScaleClass=i.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,i,e){var n=this.calculateBaseWidth(),o=this.calculateX(e)-n/2,a=this.calculateBarWidth(t);return o+a*i+i*s.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*s.barValueSpacing},calculateBarWidth:function(t){var i=this.calculateBaseWidth()-(t-1)*s.barDatasetSpacing;return i/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),this.BarClass=i.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.bars.push(new this.BarClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,s){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,s,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(i,s){e.each(i.bars,t,this,s)},this)},getBarsAtEvent:function(t){for(var i,s=[],n=e.getRelativePosition(t),o=function(t){s.push(t.bars[i])},a=0;a<this.datasets.length;a++)for(i=0;i<this.datasets[a].bars.length;i++)if(this.datasets[a].bars[i].inRange(n.x,n.y))return e.each(this.datasets,o),s;return s},buildScale:function(t){var i=this,s=function(){var t=[];return i.eachBars(function(i){t.push(i.value)}),t},n={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(n,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(n)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))
},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();this.chart.ctx;this.scale.draw(i),e.each(this.datasets,function(t,s){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,s,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Doughnut",defaults:s,initialize:function(t){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=i.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.calculateTotal(t),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),e||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),i.types.Doughnut.extend({name:"Pie",defaults:e.merge(s,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:s,initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(s.x,s.y)&&i.push(t)})},this),i},buildScale:function(t){var s=this,n=function(){var t=[];return s.eachPoints(function(i){t.push(i.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(o)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var s=this.chart.ctx,n=function(t){return null!==t.value},o=function(t,i,s){return e.findNextWhere(i,n,s)||t},a=function(t,i,s){return e.findPreviousWhere(i,n,s)||t};this.scale.draw(i),e.each(this.datasets,function(t){var h=e.where(t.points,n);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&e.each(h,function(t,i){var s=i>0&&i<h.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(a(t,h,i),t,o(t,h,i),s),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(h,function(t,i){if(0===i)s.moveTo(t.x,t.y);else if(this.options.bezierCurve){var e=a(t,h,i);s.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else s.lineTo(t.x,t.y)},this),s.stroke(),this.options.datasetFill&&h.length>0&&(s.lineTo(h[h.length-1].x,this.scale.endPoint),s.lineTo(h[0].x,this.scale.endPoint),s.fillStyle=t.fillColor,s.closePath(),s.fill()),e.each(h,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"PolarArea",defaults:s,initialize:function(t){this.segments=[],this.SegmentArc=i.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),e||(this.reflow(),this.update())},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[];e.each(t,function(t){i.push(t.value)});var s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers;i.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){var o;this.scale.animation||(o=this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e))),s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=e.getRelativePosition(t),s=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},i),n=2*Math.PI/this.scale.valuesCount,o=Math.round((s.angle-1.5*Math.PI)/n),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),s.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(t){this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return e.each(t,function(t){t.data?i=i.concat(t.data):e.each(t.points,function(t){i.push(t.value)})}),i}(),s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s)},addData:function(t,i){this.scale.valuesCount++,e.each(t,function(t,e){var s=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:s.x,y:s.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,s=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(t.points,function(t,i){0===i?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y)},this),s.closePath(),s.stroke(),s.fillStyle=t.fillColor,s.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this);
</script>
	</head>
	<body>
		<div style="width: 640px; height: 480px; max-width: 99%" class="chartjs">
			<center><h2 id="my-test-chart"><a class="header" href="#my-test-chart">My test chart</a></h2></center>
<pre><code>		&lt;canvas id=&quot;canvas&quot; height=&quot;480&quot; width=&quot;640&quot;&gt;&lt;/canvas&gt;
		&lt;script&gt;
			var chart_datacanvas = 
			{
				labels: ['Apple', 'Orange', 'Banana', 'Steak'],
				datasets: [{'data': [1, 2.5, 3, 1], 'fillColor': 'rgba(151,187,205,0.5)', 'strokeColor': 'rgba(151,187,205,0.8)', 'highlightFill': 'rgba(151,187,205,0.75)', 'highlightStroke': 'rgba(151,187,205,1)', 'pointColor': 'rgba(220,220,220,1)', 'pointStrokeColor': 'rgba(250,250,250,1)', 'pointHighlightFill': 'rgba(250,250,250,1)', 'pointHighlightStroke': 'rgba(220,220,220,1)'}, {'data': [3, 1.2, 0.1, 3], 'fillColor': 'rgba(220,220,220,0.5)', 'strokeColor': 'rgba(220,220,220,0.8)', 'highlightFill': 'rgba(220,220,220,0.75)', 'highlightStroke': 'rgba(220,220,220,1)', 'pointColor': 'rgba(220,220,220,1)', 'pointStrokeColor': 'rgba(250,250,250,1)', 'pointHighlightFill': 'rgba(250,250,250,1)', 'pointHighlightStroke': 'rgba(220,220,220,1)'}]
			}
		&lt;/script&gt;
		&lt;script&gt;
			window.onload = function()
			{{
				var ctx = document.getElementById(&quot;canvas&quot;).getContext(&quot;2d&quot;);
				var mychart = new Chart(ctx).Bar(chart_datacanvas, {responsive: true, barValueSpacing: 5, scaleShowGridLines: true, scaleBeginAtZero: false});
			}}
		&lt;/script&gt;

	&lt;/div&gt;
&lt;/body&gt;
</code></pre>
</html>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nested-example"><a class="header" href="#nested-example">Nested example</a></h1>
<h1 id="nested-readmemd-example"><a class="header" href="#nested-readmemd-example">Nested README.md example</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sub-chapter"><a class="header" href="#sub-chapter">Sub-chapter</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="polars"><a class="header" href="#polars">Polars</a></h1>
<p><a href="https://pola-rs.github.io/polars-book/user-guide/index.html">Polars with Python</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="diagrams"><a class="header" href="#diagrams">Diagrams</a></h1>
<pre class="mermaid">graph TD;
    A--&gt;B;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</pre>
<p>Here is a simple footnote<sup class="footnote-reference"><a href="#1">1</a></sup>. With some additional text after it.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>My reference.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="polars-dataframe-module"><a class="header" href="#polars-dataframe-module">Polars dataframe module</a></h1>
<pre><code class="language-python">#!pip install polars
#!pip install altair
#!pip install pyarrow
</code></pre>
<pre><code class="language-python">import pyarrow
import polars as pl
from pathlib import Path
import altair as alt
import pandas as pd
import numpy as np


</code></pre>
<pre><code class="language-python">
data_dir = Path(&quot;C:/Users/John/Data&quot;)
csvFile = data_dir / &quot;Table-2a.csv&quot;

</code></pre>
<pre><code class="language-python"> df = pl.scan_csv(csvFile, skip_rows=11)
</code></pre>
<pre><code class="language-python">df.fetch(n_rows=5)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}

.dataframe td {
    white-space: pre;
}

.dataframe td {
    line-height: 95%;
}

.dataframe td {
    padding-top: 0;
}

.dataframe td {
    padding-bottom: 0;
}
</code></pre>
</style>
<table border="1" class="dataframe" >
<small>shape: (5, 10)</small>
<thead>
<tr>
<th>
UKPRN
</th>
<th>
HE Provider
</th>
<th>
Country of HE provider
</th>
<th>
Region of HE provider
</th>
<th>
Academic Year
</th>
<th>
Type of service
</th>
<th>
Type of organisation
</th>
<th>
Number/Value Marker
</th>
<th>
Unit
</th>
<th>
Number/Value
</th>
</tr>
<tr>
<td>
i64
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
i64
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
10007783
</td>
<td>
"The University...
</td>
<td>
"Scotland"
</td>
<td>
"Scotland"
</td>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
"Number"
</td>
<td>
null
</td>
<td>
6
</td>
</tr>
<tr>
<td>
10007783
</td>
<td>
"The University...
</td>
<td>
"Scotland"
</td>
<td>
"Scotland"
</td>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"Other (non-SME...
</td>
<td>
"Number"
</td>
<td>
null
</td>
<td>
59
</td>
</tr>
<tr>
<td>
10007783
</td>
<td>
"The University...
</td>
<td>
"Scotland"
</td>
<td>
"Scotland"
</td>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"Non-commercial...
</td>
<td>
"Number"
</td>
<td>
null
</td>
<td>
34
</td>
</tr>
<tr>
<td>
10007783
</td>
<td>
"The University...
</td>
<td>
"Scotland"
</td>
<td>
"Scotland"
</td>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"Total"
</td>
<td>
"Number"
</td>
<td>
null
</td>
<td>
99
</td>
</tr>
<tr>
<td>
10007783
</td>
<td>
"The University...
</td>
<td>
"Scotland"
</td>
<td>
"Scotland"
</td>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
"Value"
</td>
<td>
"000s"
</td>
<td>
53
</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="language-python">colUse=df.fetch(n_rows=5).columns[4:]
print(colUse)
</code></pre>
<pre><code>['Academic Year', 'Type of service', 'Type of organisation', 'Number/Value Marker', 'Unit', 'Number/Value']
</code></pre>
<pre><code class="language-python">df.fetch(n_rows=5).select(pl.col(
        colUse)).filter(pl.col(&quot;Number/Value Marker&quot;)==&quot;Value&quot;)

</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}

.dataframe td {
    white-space: pre;
}

.dataframe td {
    line-height: 95%;
}

.dataframe td {
    padding-top: 0;
}

.dataframe td {
    padding-bottom: 0;
}
</code></pre>
</style>
<table border="1" class="dataframe" >
<small>shape: (1, 6)</small>
<thead>
<tr>
<th>
Academic Year
</th>
<th>
Type of service
</th>
<th>
Type of organisation
</th>
<th>
Number/Value Marker
</th>
<th>
Unit
</th>
<th>
Number/Value
</th>
</tr>
<tr>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
i64
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
"Value"
</td>
<td>
"000s"
</td>
<td>
53
</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="language-python"># q = (
#     pl.scan_csv(&quot;iris.csv&quot;)
#     .filter(pl.col(&quot;sepal_length&quot;) &gt; 5)
#     .groupby(&quot;species&quot;)
#     .agg(pl.all().sum())
# )

# df = q.collect()

</code></pre>
<pre><code class="language-python">q=(
    pl.scan_csv(csvFile, skip_rows=11)
    .filter(pl.col(&quot;Number/Value Marker&quot;)==&quot;Value&quot;)
    .groupby(['Academic Year', 'Type of service', 'Type of organisation'])
    .agg(pl.col(&quot;Number/Value&quot;).sum())
)
q.collect()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}

.dataframe td {
    white-space: pre;
}

.dataframe td {
    line-height: 95%;
}

.dataframe td {
    padding-top: 0;
}

.dataframe td {
    padding-bottom: 0;
}
</code></pre>
</style>
<table border="1" class="dataframe" >
<small>shape: (84, 4)</small>
<thead>
<tr>
<th>
Academic Year
</th>
<th>
Type of service
</th>
<th>
Type of organisation
</th>
<th>
Number/Value
</th>
</tr>
<tr>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
i64
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
"2016/17"
</td>
<td>
"Contract resea...
</td>
<td>
"SME's"
</td>
<td>
64207
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
63921
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
61865
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
64104
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1248652
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Consultancy"
</td>
<td>
"Other (non-SME...
</td>
<td>
113618
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Consultancy"
</td>
<td>
"Non-commercial...
</td>
<td>
278511
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
58840
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
81275
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Facilities and...
</td>
<td>
"SME's"
</td>
<td>
79414
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Facilities and...
</td>
<td>
"Total"
</td>
<td>
225355
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
840801
</td>
</tr>
<tr>
<td>
...
</td>
<td>
...
</td>
<td>
...
</td>
<td>
...
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Contract resea...
</td>
<td>
"Other (non-SME...
</td>
<td>
504057
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Consultancy"
</td>
<td>
"Non-commercial...
</td>
<td>
288268
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Facilities and...
</td>
<td>
"Total"
</td>
<td>
213062
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Consultancy"
</td>
<td>
"Total"
</td>
<td>
509294
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Consultancy"
</td>
<td>
"Other (non-SME...
</td>
<td>
105477
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Contract resea...
</td>
<td>
"SME's"
</td>
<td>
88001
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Contract resea...
</td>
<td>
"Other (non-SME...
</td>
<td>
450968
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Consultancy"
</td>
<td>
"Other (non-SME...
</td>
<td>
113827
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1209381
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Facilities and...
</td>
<td>
"Non-commercial...
</td>
<td>
70701
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1318792
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Facilities and...
</td>
<td>
"Non-commercial...
</td>
<td>
147964
</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="language-python">
</code></pre>
<pre><code class="language-python">q.collect().sort(pl.col(&quot;Number/Value&quot;))
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}

.dataframe td {
    white-space: pre;
}

.dataframe td {
    line-height: 95%;
}

.dataframe td {
    padding-top: 0;
}

.dataframe td {
    padding-bottom: 0;
}
</code></pre>
</style>
<table border="1" class="dataframe" >
<small>shape: (84, 4)</small>
<thead>
<tr>
<th>
Academic Year
</th>
<th>
Type of service
</th>
<th>
Type of organisation
</th>
<th>
Number/Value
</th>
</tr>
<tr>
<td>
str
</td>
<td>
str
</td>
<td>
str
</td>
<td>
i64
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
"2014/15"
</td>
<td>
"Contract resea...
</td>
<td>
"SME's"
</td>
<td>
48474
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Contract resea...
</td>
<td>
"SME's"
</td>
<td>
54268
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
58840
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Facilities and...
</td>
<td>
"SME's"
</td>
<td>
59182
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
60791
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Facilities and...
</td>
<td>
"SME's"
</td>
<td>
61182
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
61865
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Facilities and...
</td>
<td>
"SME's"
</td>
<td>
62396
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
63320
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Consultancy"
</td>
<td>
"SME's"
</td>
<td>
63921
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Facilities and...
</td>
<td>
"Other (non-SME...
</td>
<td>
64104
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Contract resea...
</td>
<td>
"SME's"
</td>
<td>
64207
</td>
</tr>
<tr>
<td>
...
</td>
<td>
...
</td>
<td>
...
</td>
<td>
...
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
740139
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
751853
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
772558
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
828242
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Contract resea...
</td>
<td>
"Non-commercial...
</td>
<td>
840801
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1209381
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1248652
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1287733
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1318792
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1349980
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1417724
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Contract resea...
</td>
<td>
"Total"
</td>
<td>
1437337
</td>
</tr>
</tbody>
</table>
</div>
<p>data = alt.Data(values=[{'x': 'A', 'y': 5},
{'x': 'B', 'y': 3},
{'x': 'C', 'y': 6},
{'x': 'D', 'y': 7},
{'x': 'E', 'y': 2}])</p>
<pre><code class="language-python">
</code></pre>
<pre><code class="language-python">df=q.collect()
</code></pre>
<pre><code class="language-python">#df.write_csv(data_dir / 'test.csv')
df.write_json(data_dir / 'test.json')

</code></pre>
<pre><code class="language-python">#list(df[pl.col(['Academic Year', 'Type of service', 'Type of organisation'])])
</code></pre>
<pre><code class="language-python">#data = alt.Data(data_dir / 'test.json')
</code></pre>
<pre><code class="language-python"># .(pl.col(&quot;Number/Value&quot;).over(pl.col(&quot;Type of service&quot;).alias(&quot;sum&quot;)\
# pl.scan_csv(
#     csvFile, skip_rows=11)\
# .filter(pl.col(&quot;Number/Value Marker&quot;)==&quot;Value&quot;)\
# .sort(pl.col(&quot;Number/Value&quot;), reverse=True)\
# .collect()
</code></pre>
<pre><code class="language-python">
</code></pre>
<pre><code class="language-python">data=pl.scan_csv(
    csvFile, skip_rows=11)\
.filter((pl.col(&quot;Number/Value Marker&quot;)==&quot;Value&quot;) &amp; (pl.col(&quot;Type of organisation&quot;)!=&quot;Total&quot;))\
.sort(pl.col(&quot;Number/Value&quot;), reverse=True)\
.collect().to_pandas()
</code></pre>
<pre><code class="language-python">#    .groupby(['Academic Year', 'Type of service', 'Type of organisation'])

q=(
    pl.scan_csv(csvFile, skip_rows=11)
    .filter((pl.col(&quot;Number/Value Marker&quot;)==&quot;Value&quot;) &amp; (pl.col(&quot;Type of organisation&quot;)!=&quot;Total&quot;))\
    .groupby(([&quot;Academic Year&quot;, &quot;Type of organisation&quot;]))
    .agg(pl.col(&quot;Number/Value&quot;).sum().alias(&quot;Value&quot;))
    .sort(pl.col([&quot;Academic Year&quot;, &quot;Type of organisation&quot;]))
)
q.collect()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}

.dataframe td {
    white-space: pre;
}

.dataframe td {
    line-height: 95%;
}

.dataframe td {
    padding-top: 0;
}

.dataframe td {
    padding-bottom: 0;
}
</code></pre>
</style>
<table border="1" class="dataframe" >
<small>shape: (21, 3)</small>
<thead>
<tr>
<th>
Academic Year
</th>
<th>
Type of organisation
</th>
<th>
Value
</th>
</tr>
<tr>
<td>
str
</td>
<td>
str
</td>
<td>
i64
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
"2014/15"
</td>
<td>
"Non-commercial...
</td>
<td>
1054040
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"Other (non-SME...
</td>
<td>
606228
</td>
</tr>
<tr>
<td>
"2014/15"
</td>
<td>
"SME's"
</td>
<td>
188931
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Non-commercial...
</td>
<td>
1087274
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"Other (non-SME...
</td>
<td>
629597
</td>
</tr>
<tr>
<td>
"2015/16"
</td>
<td>
"SME's"
</td>
<td>
200689
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Non-commercial...
</td>
<td>
1129121
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"Other (non-SME...
</td>
<td>
624115
</td>
</tr>
<tr>
<td>
"2016/17"
</td>
<td>
"SME's"
</td>
<td>
217219
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Non-commercial...
</td>
<td>
1124997
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"Other (non-SME...
</td>
<td>
668466
</td>
</tr>
<tr>
<td>
"2017/18"
</td>
<td>
"SME's"
</td>
<td>
222392
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Non-commercial...
</td>
<td>
1122699
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"Other (non-SME...
</td>
<td>
704394
</td>
</tr>
<tr>
<td>
"2018/19"
</td>
<td>
"SME's"
</td>
<td>
250591
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Non-commercial...
</td>
<td>
1219267
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"Other (non-SME...
</td>
<td>
693636
</td>
</tr>
<tr>
<td>
"2019/20"
</td>
<td>
"SME's"
</td>
<td>
217653
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Non-commercial...
</td>
<td>
1313555
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"Other (non-SME...
</td>
<td>
677397
</td>
</tr>
<tr>
<td>
"2020/21"
</td>
<td>
"SME's"
</td>
<td>
209316
</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="language-python">data=q.collect().to_pandas()
</code></pre>
<pre><code class="language-python">data.head(3)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Academic Year</th>
      <th>Type of organisation</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2014/15</td>
      <td>Non-commercial organisations</td>
      <td>1054040</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2014/15</td>
      <td>Other (non-SME) commercial businesses</td>
      <td>606228</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2014/15</td>
      <td>SME's</td>
      <td>188931</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code class="language-python">chart=alt.Chart(data)
</code></pre>
<pre><code class="language-python">chart.mark_bar().encode(
    y='Academic Year',
    x='Value',
    color=&quot;Type of organisation&quot;
)
</code></pre>
<div id="altair-viz-e27681f437d74c878ad5fb686c0dc825"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e27681f437d74c878ad5fb686c0dc825") {
      outputDiv = document.getElementById("altair-viz-e27681f437d74c878ad5fb686c0dc825");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };
<pre><code>function maybeLoadScript(lib, version) {
  var key = `${lib.replace(&quot;-&quot;, &quot;&quot;)}_version`;
  return (VEGA_DEBUG[key] == version) ?
    Promise.resolve(paths[lib]) :
    new Promise(function(resolve, reject) {
      var s = document.createElement('script');
      document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);
      s.async = true;
      s.onload = () =&gt; {
        VEGA_DEBUG[key] = version;
        return resolve(paths[lib]);
      };
      s.onerror = () =&gt; reject(`Error loading script: ${paths[lib]}`);
      s.src = paths[lib];
    });
}

function showError(err) {
  outputDiv.innerHTML = `&lt;div class=&quot;error&quot; style=&quot;color:red;&quot;&gt;${err}&lt;/div&gt;`;
  throw err;
}

function displayChart(vegaEmbed) {
  vegaEmbed(outputDiv, spec, embedOpt)
    .catch(err =&gt; showError(`Javascript Error: ${err.message}&lt;br&gt;This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
}

if(typeof define === &quot;function&quot; &amp;&amp; define.amd) {
  requirejs.config({paths});
  require([&quot;vega-embed&quot;], displayChart, err =&gt; showError(`Error loading script: ${err.message}`));
} else {
  maybeLoadScript(&quot;vega&quot;, &quot;5&quot;)
    .then(() =&gt; maybeLoadScript(&quot;vega-lite&quot;, &quot;4.17.0&quot;))
    .then(() =&gt; maybeLoadScript(&quot;vega-embed&quot;, &quot;6&quot;))
    .catch(showError)
    .then(() =&gt; displayChart(vegaEmbed));
}
</code></pre>
<p>})({&quot;config&quot;: {&quot;view&quot;: {&quot;continuousWidth&quot;: 400, &quot;continuousHeight&quot;: 300}}, &quot;data&quot;: {&quot;name&quot;: &quot;data-d5d9f62532f5e8e336e7e089a625e550&quot;}, &quot;mark&quot;: &quot;bar&quot;, &quot;encoding&quot;: {&quot;color&quot;: {&quot;field&quot;: &quot;Type of organisation&quot;, &quot;type&quot;: &quot;nominal&quot;}, &quot;x&quot;: {&quot;field&quot;: &quot;Value&quot;, &quot;type&quot;: &quot;quantitative&quot;}, &quot;y&quot;: {&quot;field&quot;: &quot;Academic Year&quot;, &quot;type&quot;: &quot;nominal&quot;}}, &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.17.0.json&quot;, &quot;datasets&quot;: {&quot;data-d5d9f62532f5e8e336e7e089a625e550&quot;: [{&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1054040}, {&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 606228}, {&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 188931}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1087274}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 629597}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 200689}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1129121}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 624115}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 217219}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1124997}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 668466}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 222392}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1122699}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 704394}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 250591}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1219267}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 693636}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 217653}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1313555}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 677397}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 209316}]}}, {&quot;mode&quot;: &quot;vega-lite&quot;});
</script></p>
<pre><code class="language-python">chart.mark_arc().encode(
    theta=alt.Theta(field=&quot;Number/Value&quot;, type=&quot;quantitative&quot;),
    color=alt.Color(field=&quot;Academic Year&quot;, type=&quot;nominal&quot;),
)

</code></pre>
<div id="altair-viz-36cfc9be4a864efdbf5996992a0c80f8"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-36cfc9be4a864efdbf5996992a0c80f8") {
      outputDiv = document.getElementById("altair-viz-36cfc9be4a864efdbf5996992a0c80f8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };
<pre><code>function maybeLoadScript(lib, version) {
  var key = `${lib.replace(&quot;-&quot;, &quot;&quot;)}_version`;
  return (VEGA_DEBUG[key] == version) ?
    Promise.resolve(paths[lib]) :
    new Promise(function(resolve, reject) {
      var s = document.createElement('script');
      document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);
      s.async = true;
      s.onload = () =&gt; {
        VEGA_DEBUG[key] = version;
        return resolve(paths[lib]);
      };
      s.onerror = () =&gt; reject(`Error loading script: ${paths[lib]}`);
      s.src = paths[lib];
    });
}

function showError(err) {
  outputDiv.innerHTML = `&lt;div class=&quot;error&quot; style=&quot;color:red;&quot;&gt;${err}&lt;/div&gt;`;
  throw err;
}

function displayChart(vegaEmbed) {
  vegaEmbed(outputDiv, spec, embedOpt)
    .catch(err =&gt; showError(`Javascript Error: ${err.message}&lt;br&gt;This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
}

if(typeof define === &quot;function&quot; &amp;&amp; define.amd) {
  requirejs.config({paths});
  require([&quot;vega-embed&quot;], displayChart, err =&gt; showError(`Error loading script: ${err.message}`));
} else {
  maybeLoadScript(&quot;vega&quot;, &quot;5&quot;)
    .then(() =&gt; maybeLoadScript(&quot;vega-lite&quot;, &quot;4.17.0&quot;))
    .then(() =&gt; maybeLoadScript(&quot;vega-embed&quot;, &quot;6&quot;))
    .catch(showError)
    .then(() =&gt; displayChart(vegaEmbed));
}
</code></pre>
<p>})({&quot;config&quot;: {&quot;view&quot;: {&quot;continuousWidth&quot;: 400, &quot;continuousHeight&quot;: 300}}, &quot;data&quot;: {&quot;name&quot;: &quot;data-d5d9f62532f5e8e336e7e089a625e550&quot;}, &quot;mark&quot;: &quot;arc&quot;, &quot;encoding&quot;: {&quot;color&quot;: {&quot;field&quot;: &quot;Academic Year&quot;, &quot;type&quot;: &quot;nominal&quot;}, &quot;theta&quot;: {&quot;field&quot;: &quot;Number/Value&quot;, &quot;type&quot;: &quot;quantitative&quot;}}, &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.17.0.json&quot;, &quot;datasets&quot;: {&quot;data-d5d9f62532f5e8e336e7e089a625e550&quot;: [{&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1054040}, {&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 606228}, {&quot;Academic Year&quot;: &quot;2014/15&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 188931}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1087274}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 629597}, {&quot;Academic Year&quot;: &quot;2015/16&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 200689}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1129121}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 624115}, {&quot;Academic Year&quot;: &quot;2016/17&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 217219}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1124997}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 668466}, {&quot;Academic Year&quot;: &quot;2017/18&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 222392}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1122699}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 704394}, {&quot;Academic Year&quot;: &quot;2018/19&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 250591}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1219267}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 693636}, {&quot;Academic Year&quot;: &quot;2019/20&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 217653}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;Non-commercial organisations&quot;, &quot;Value&quot;: 1313555}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;Other (non-SME) commercial businesses&quot;, &quot;Value&quot;: 677397}, {&quot;Academic Year&quot;: &quot;2020/21&quot;, &quot;Type of organisation&quot;: &quot;SME's&quot;, &quot;Value&quot;: 209316}]}}, {&quot;mode&quot;: &quot;vega-lite&quot;});
</script></p>
<pre><code class="language-python">
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
